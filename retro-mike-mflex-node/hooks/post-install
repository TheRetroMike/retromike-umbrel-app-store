#!/usr/bin/env bash
set -euo pipefail

PM="/home/umbrel/umbrel/app-data/retro-mike-miningcore/scripts/pool-manager.sh"
[ -x "${PM}" ] || exit 0

# MFLEX: wallet bootstrap + legacy address + mflex flag
"${PM}" register-bitcoin \
  --pool-id "mflex" \
  --coin "multiflex" \
  --app-id "retro-mike-mflex-node" \
  --rpc-port "9010" \
  --zmq-port "7010" \
  --stratum-port "6010" \
  --daemon-host "retro-mike-mflex-node_node_1" \
  --rpc-wallet "pool" \
  --getnewaddress-params '["","legacy"]' \
  --mflex-enabled
