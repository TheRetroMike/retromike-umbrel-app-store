#!/usr/bin/env bash
set -euo pipefail

PM="/home/umbrel/umbrel/app-data/retro-mike-miningcore/scripts/pool-manager.sh"
[ -x "${PM}" ] || exit 0

ARGS=( register-bitcoin
  --pool-id "mflex"
  --coin "multiflex"
  --app-id "retro-mike-mflex-node"
  --rpc-port "9010"
  --zmq-port "7010"
  --stratum-port "6010"
  --daemon-host "retro-mike-mflex-node_node_1"
)

ARGS+=( --rpc-wallet "pool" )
ARGS+=( --getnewaddress-params '["","legacy"]' )
ARGS+=( --mflex-enabled )
"${PM}" "${ARGS[@]}"
